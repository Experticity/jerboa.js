!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function o(e){return e&&e.__esModule?e:{"default":e}}var a=n(1),r=o(a);window.jerboa=r["default"]},function(e,t,n){function o(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=(0,c.resolveContainer)(e.target,s["default"].currentStrategy);if(t){var n=(0,c.getSelector)(e.target),o=(0,c.getSelector)(t),a=(0,c.getRelativeOffset)(e.target,t);console.log("OFFSET",a),a.x+=e.offsetX,a.y+=e.offsetY;var r=t.getBoundingClientRect(),i={positioning:s["default"].currentPositioning,target:n,container:o,containerSize:{width:r.width,height:r.height},windowSize:{width:window.innerWidth,height:window.innerHeight},offset:a};return{time:(new Date).toISOString(),position:i,url:s["default"].url,data:s["default"].additionalData,user:s["default"].currentUser,pageId:s["default"].pageId,comments:[]}}}function r(e){if(s["default"].active&&((0,l.closeInfoBox)(),!s["default"].feedbackBoxOpen)){var t=a(e);if(t){(0,d.emit)("preAnnotate",t),s["default"].feedbackBoxOpen=!0;var n=(0,l.createMarker)(t),o=(0,l.addBox)(n,!1),r=(0,l.addTextField)(o.container,"Enter comment:");r.cancel.addEventListener("click",function(){(0,d.emit)("cancel",t),s["default"].feedbackBoxOpen=!1,document.body.removeChild(n)}),r.save.addEventListener("click",function(){r.textarea.value?(t.text=r.textarea.value,(0,d.emit)("save",t),s["default"].feedbackBoxOpen=!1,n.removeChild(o.box),(0,l.createInfoBox)(n,t)):((0,d.emit)("cancel",t),s["default"].feedbackBoxOpen=!1,document.body.removeChild(n))})}}}function i(){var e="25px",t="25px",n=document.createElement("div");n.classList.add("toggle-button-container");var o=document.createElement("div");o.classList.add("toggle-button-text"),o.textContent="Feedback On",n.appendChild(o);var a=document.createElement("div");a.classList.add("toggle-button","toggle-button-selected"),n.appendChild(a);var r=document.createElement("button");a.appendChild(r),n.style.bottom=e,n.style.left=t,n.style.position="fixed",a.addEventListener("click",function(e){e.preventDefault();var t=document.getElementsByClassName("feedback-spot");console.log(t),a.classList.contains("toggle-button-selected")?(a.classList.remove("toggle-button-selected"),o.textContent="Feedback Off",s["default"].active=!1,Array.prototype.forEach.call(t,function(e){e.classList.add("off")})):(a.classList.add("toggle-button-selected"),o.textContent="Feedback On",s["default"].active=!0,Array.prototype.forEach.call(t,function(e){e.classList.remove("off")}))}),document.body.appendChild(n)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(2),d=n(3),l=n(4),u=n(5),s=o(u),f=n(6),v=o(f),p={global:function(e){return"BODY"===e.tagName},byClass:function(e){return function(t){return console.log("e",t),t.classList.contains(e)}}};t["default"]={init:function(e){console.log(e),e=e||{},s["default"].currentStrategy=e.strategy||p.global,s["default"].currentPositioning=e.positioning||"PERCENT",s["default"].currentUser=e.user,s["default"].currentUserId=e.userId,s["default"].url=window.location.href,s["default"].pageId=(0,v["default"])(window.location.href),e.data&&(s["default"].additionalData=e.data),e.points&&e.points.forEach(function(e){var t=(0,l.createMarker)(e);console.log("init spot: ",t,"init point: ",e),(0,l.createInfoBox)(t,e)}),document.addEventListener("click",r),i()},close:function(){document.removeEventListener("click",r)},addEventListener:d.addEventListener,strategies:p}},function(e,t){function n(e,t){if("BODY"===e.tagName)return"body"+(t?" > "+t:"");if(e.id)return"#"+e.id+(t?" > "+t:"");var o=Array.prototype.slice.call(e.parentElement.children).indexOf(e),a=e.tagName.toLowerCase()+":nth-child("+(o+1)+")"+(t?" > "+t:"");return n(e.parentElement,a)}function o(e,t){var n=a(e),o=a(t);return console.log("offset: ",n,"cOffset: ",o),{x:n[0]-o[0],y:n[1]-o[1]}}function a(e){var t=e.getBoundingClientRect(),n=t.left+document.body.scrollLeft,o=t.top+document.body.scrollTop;return console.log(1,n,2,o,3,e.offsetLeft,4,e.offsetTop),[n,o]}function r(e,t){return console.log("elem",e),console.log("strategy",t),console.log("strategy(elem)",t(e)),t(e)?e:"HTML"===e.tagName?null:r(e.parentElement,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelector=n,t.getRelativeOffset=o,t.getGlobalOffset=a,t.resolveContainer=r},function(e,t){function n(e,t){a[e]&&a[e].forEach(function(e){return e(t)})}function o(e,t){a[e]||(a[e]=[]),a[e].push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.emit=n,t.addEventListener=o;var a={};t.__listeners=a},function(e,t,n){function o(e){return e&&e.__esModule?e:{"default":e}}function a(){return g}function r(e){g=e}function i(e){var t=e.position,n=document.querySelector(t.container),o=(0,f.getGlobalOffset)(n),a=document.createElement("div"),r=void 0,i=void 0;if(a.classList.add("feedback-spot"),"PIXEL"===t.positioning)r=o[0]+t.offset.x,i=o[1]+t.offset.y;else if("PERCENT"===t.positioning){var c=t.offset.x/t.containerSize.width,d=t.offset.y/t.containerSize.height,l=n.getBoundingClientRect();r=o[0]+l.width*c,i=o[1]+l.height*d}return a.style.top=i+"px",a.style.left=r+"px",document.body.appendChild(a),a}function c(e,t){e.addEventListener("click",function(n){m["default"].active&&(n.stopPropagation(),t&&(e.classList.toggle("active"),g!==e?(d(),g=e):g=null))});var n=document.createElement("div");n.classList.add("feedback-box"),t&&n.classList.add("toggled"),n.addEventListener("click",function(e){e.stopPropagation()}),e.appendChild(n);var o=document.createElement("div");return o.classList.add("feedback-container"),n.appendChild(o),{box:n,container:o}}function d(){g&&(g.classList.remove("active"),g=null)}function l(e,t){console.log("addText payload",t);var n=document.createElement("div");n.classList.add("feedback-text"),e.appendChild(n);var o=document.createElement("div");o.classList.add("feedback-comment"),o.textContent=t.text,n.appendChild(o);var a=document.createElement("div");a.classList.add("feedback-info");var r=new Date(t.time);if(a.textContent="By "+(t.user||m["default"].currentUser||"unknown user")+" at "+r.toLocaleString(),n.appendChild(a),console.log("EDIT BUTTON??, payload.userId: ",t.userId,"state.currentUserId:",m["default"].currentUserId),t.userId===parseInt(m["default"].currentUserId)){var i=document.createElement("a");i.classList.add("delete-button"),i.innerText="X",i.setAttribute("role","button"),i.setAttribute("href","#"),a.appendChild(i);var c=document.createElement("a");c.classList.add("edit-button"),c.innerText="Edit",c.setAttribute("role","button"),c.setAttribute("href","#"),a.appendChild(c),i.addEventListener("click",function(t){t.preventDefault(),e.removeChild(n),(0,v.emit)("deleteComment")}),c.addEventListener("click",function(o){o.preventDefault();var a=u(null,null,"comment-textfield");a.textarea.value=t.text,a.cancel.addEventListener("click",function(){e.replaceChild(n,a.container)}),a.save.addEventListener("click",function(){t.text===a.textarea.value?e.replaceChild(n,a.container):(t.text=a.textarea.value,n.children[0].textContent=t.text,e.replaceChild(n,a.container),(0,v.emit)("saveEdittedComment",t))}),e.replaceChild(a.container,n),(0,v.emit)("editComment")})}return n}function u(e,t,n){var o=document.createElement("div");if(n&&o.classList.add(n),e&&e.appendChild(o),t){var a=document.createElement("label");a.textContent=t,o.appendChild(a)}var r=document.createElement("textarea");o.appendChild(r);var i=document.createElement("div");i.classList.add("button-holder"),o.appendChild(i);var c=document.createElement("button");c.classList.add("cancel-button"),c.innerText="Cancel",i.appendChild(c);var d=document.createElement("button");return d.classList.add("save-button"),d.innerText="Save",i.appendChild(d),{cancel:c,save:d,textarea:r,container:o}}function s(e,t){function n(e,t){e.forEach(function(t,n){t.includes("owner-")&&e.remove(t)}),e.add(t)}function o(e,t){e.forEach(function(t,n){t.includes("status-")&&e.remove(t)}),e.add(t)}console.log("createInfoBox payload",t);var a=c(e,!0),r={PM:"pm",Client:"client",ID:"id",IxD:"ixd",Video:"video"},i={Open:"open",Closed:"closed","No Action":"no-action"},s="pm",f=document.createElement("select");a.container.appendChild(f);for(var p=Object.keys(r),m=0;m<p.length;m++){var g=document.createElement("option");g.value=r[p[m]],g.text=p[m],f.appendChild(g)}t.assigneeRole&&t.assigneeRole!==s?(f.value=t.assigneeRole,n(e.classList,"owner-"+t.assigneeRole)):f.value=s,f.addEventListener("change",function(o){t.assigneeRole=o.target.value,n(e.classList,"owner-"+t.assigneeRole),(0,v.emit)("changeOwner",t.assigneeRole)});var x="open",b=document.createElement("select");a.container.appendChild(b);for(var C=Object.keys(i),E=0;E<C.length;E++){var y=document.createElement("option");y.value=i[C[E]],y.text=C[E],b.appendChild(y)}t.status&&t.status!==x?(b.value=t.status,o(e.classList,"status-"+t.status)):b.value=x,b.addEventListener("change",function(n){t.status=n.target.value,o(e.classList,"status-"+t.status),(0,v.emit)("changeStatus",t.status)}),l(a.container,t),t.comments.forEach(function(e){l(a.container,e)});var L=u(a.container,"Comment:","comment-textfield");return L.cancel.addEventListener("click",function(){var e=h(L.textarea.value);L.textarea.value="",(0,v.emit)("cancelComment",e),d()}),L.save.addEventListener("click",function(){var e=h(L.textarea.value);L.textarea.value="",t.comments.push(e),(0,v.emit)("saveComment",t),a.container.removeChild(L.container),l(a.container,e),a.container.appendChild(L.container)}),Object.assign({},L,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.__getOpenSpot=a,t.__setOpenSpot=r,t.createMarker=i,t.addBox=c,t.closeInfoBox=d,t.addText=l,t.addTextField=u,t.createInfoBox=s;var f=n(2),v=n(3),p=n(5),m=o(p),g=void 0,h=function(e){return{time:(new Date).toISOString(),user:m["default"].currentUser,text:e}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={active:!0,currentStrategy:void 0,currentUser:void 0,currentUserId:void 0,currentPositioning:void 0,additionalData:void 0,feedbackBoxOpen:!1,url:void 0,pageId:void 0}},function(e,t,n){var o;!function(a){function r(e,t){var n=(65535&e)+(65535&t),o=(e>>16)+(t>>16)+(n>>16);return o<<16|65535&n}function i(e,t){return e<<t|e>>>32-t}function c(e,t,n,o,a,c){return r(i(r(r(t,e),r(o,c)),a),n)}function d(e,t,n,o,a,r,i){return c(t&n|~t&o,e,t,a,r,i)}function l(e,t,n,o,a,r,i){return c(t&o|n&~o,e,t,a,r,i)}function u(e,t,n,o,a,r,i){return c(t^n^o,e,t,a,r,i)}function s(e,t,n,o,a,r,i){return c(n^(t|~o),e,t,a,r,i)}function f(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n,o,a,i,c,f=1732584193,v=-271733879,p=-1732584194,m=271733878;for(n=0;n<e.length;n+=16)o=f,a=v,i=p,c=m,f=d(f,v,p,m,e[n],7,-680876936),m=d(m,f,v,p,e[n+1],12,-389564586),p=d(p,m,f,v,e[n+2],17,606105819),v=d(v,p,m,f,e[n+3],22,-1044525330),f=d(f,v,p,m,e[n+4],7,-176418897),m=d(m,f,v,p,e[n+5],12,1200080426),p=d(p,m,f,v,e[n+6],17,-1473231341),v=d(v,p,m,f,e[n+7],22,-45705983),f=d(f,v,p,m,e[n+8],7,1770035416),m=d(m,f,v,p,e[n+9],12,-1958414417),p=d(p,m,f,v,e[n+10],17,-42063),v=d(v,p,m,f,e[n+11],22,-1990404162),f=d(f,v,p,m,e[n+12],7,1804603682),m=d(m,f,v,p,e[n+13],12,-40341101),p=d(p,m,f,v,e[n+14],17,-1502002290),v=d(v,p,m,f,e[n+15],22,1236535329),f=l(f,v,p,m,e[n+1],5,-165796510),m=l(m,f,v,p,e[n+6],9,-1069501632),p=l(p,m,f,v,e[n+11],14,643717713),v=l(v,p,m,f,e[n],20,-373897302),f=l(f,v,p,m,e[n+5],5,-701558691),m=l(m,f,v,p,e[n+10],9,38016083),p=l(p,m,f,v,e[n+15],14,-660478335),v=l(v,p,m,f,e[n+4],20,-405537848),f=l(f,v,p,m,e[n+9],5,568446438),m=l(m,f,v,p,e[n+14],9,-1019803690),p=l(p,m,f,v,e[n+3],14,-187363961),v=l(v,p,m,f,e[n+8],20,1163531501),f=l(f,v,p,m,e[n+13],5,-1444681467),m=l(m,f,v,p,e[n+2],9,-51403784),p=l(p,m,f,v,e[n+7],14,1735328473),v=l(v,p,m,f,e[n+12],20,-1926607734),f=u(f,v,p,m,e[n+5],4,-378558),m=u(m,f,v,p,e[n+8],11,-2022574463),p=u(p,m,f,v,e[n+11],16,1839030562),v=u(v,p,m,f,e[n+14],23,-35309556),f=u(f,v,p,m,e[n+1],4,-1530992060),m=u(m,f,v,p,e[n+4],11,1272893353),p=u(p,m,f,v,e[n+7],16,-155497632),v=u(v,p,m,f,e[n+10],23,-1094730640),f=u(f,v,p,m,e[n+13],4,681279174),m=u(m,f,v,p,e[n],11,-358537222),p=u(p,m,f,v,e[n+3],16,-722521979),v=u(v,p,m,f,e[n+6],23,76029189),f=u(f,v,p,m,e[n+9],4,-640364487),m=u(m,f,v,p,e[n+12],11,-421815835),p=u(p,m,f,v,e[n+15],16,530742520),v=u(v,p,m,f,e[n+2],23,-995338651),f=s(f,v,p,m,e[n],6,-198630844),m=s(m,f,v,p,e[n+7],10,1126891415),p=s(p,m,f,v,e[n+14],15,-1416354905),v=s(v,p,m,f,e[n+5],21,-57434055),f=s(f,v,p,m,e[n+12],6,1700485571),m=s(m,f,v,p,e[n+3],10,-1894986606),p=s(p,m,f,v,e[n+10],15,-1051523),v=s(v,p,m,f,e[n+1],21,-2054922799),f=s(f,v,p,m,e[n+8],6,1873313359),m=s(m,f,v,p,e[n+15],10,-30611744),p=s(p,m,f,v,e[n+6],15,-1560198380),v=s(v,p,m,f,e[n+13],21,1309151649),f=s(f,v,p,m,e[n+4],6,-145523070),m=s(m,f,v,p,e[n+11],10,-1120210379),p=s(p,m,f,v,e[n+2],15,718787259),v=s(v,p,m,f,e[n+9],21,-343485551),f=r(f,o),v=r(v,a),p=r(p,i),m=r(m,c);return[f,v,p,m]}function v(e){var t,n="",o=32*e.length;for(t=0;t<o;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function p(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var o=8*e.length;for(t=0;t<o;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function m(e){return v(f(p(e),8*e.length))}function g(e,t){var n,o,a=p(e),r=[],i=[];for(r[15]=i[15]=void 0,a.length>16&&(a=f(a,8*e.length)),n=0;n<16;n+=1)r[n]=909522486^a[n],i[n]=1549556828^a[n];return o=f(r.concat(p(t)),512+8*t.length),v(f(i.concat(o),640))}function h(e){var t,n,o="0123456789abcdef",a="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),a+=o.charAt(t>>>4&15)+o.charAt(15&t);return a}function x(e){return unescape(encodeURIComponent(e))}function b(e){return m(x(e))}function C(e){return h(b(e))}function E(e,t){return g(x(e),x(t))}function y(e,t){return h(E(e,t))}function L(e,t,n){return t?n?E(t,e):y(t,e):n?b(e):C(e)}o=function(){return L}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))}(this)}])}]);