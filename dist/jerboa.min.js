!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}var a=n(1),i=r(a);window.jerboa=i["default"]},function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=(0,o.resolveContainer)(e.target,u["default"].currentStrategy);if(t){var n=(0,o.getSelector)(e.target),r=(0,o.getSelector)(t),a=(0,o.getRelativeOffset)(e.target,t);a[0]+=e.offsetX,a[1]+=e.offsetY;var i=t.getBoundingClientRect(),c={positioning:u["default"].currentPositioning,target:n,container:r,containerSize:{width:i.width,height:i.height},windowSize:{width:window.innerWidth,height:window.innerHeight},offset:a};return{datetime:(new Date).toISOString(),position:c,url:window.location.href,data:u["default"].additionalData,user:u["default"].currentUser}}}function i(e){if((0,d.closeInfoBox)(),!u["default"].feedbackBoxOpen){var t=a(e);if(t){(0,c.emit)("preAnnotate",t),u["default"].feedbackBoxOpen=!0;var n=(0,d.createMarker)(t),r=(0,d.addBox)(n,!1),i=(0,d.addTextField)(r.container,"Enter comment:");i.cancel.addEventListener("click",function(){(0,c.emit)("cancel",t),u["default"].feedbackBoxOpen=!1,document.body.removeChild(n)}),i.save.addEventListener("click",function(){t.comments=[{text:i.textarea.value,user:u["default"].currentUser,datetime:(new Date).toISOString(),replies:[]}],(0,c.emit)("save",t),u["default"].feedbackBoxOpen=!1,n.removeChild(r.box),(0,d.createInfoBox)(n,t)})}}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),c=n(3),d=n(4),l=n(5),u=r(l),s=n(6),f=(r(s),{global:function(e){return"BODY"===e.tagName},byClass:function(e){return function(t){return t.classList.contains(e)}}});t["default"]={init:function(e){e=e||{},e.data&&(u["default"].additionalData=e.data),e.points&&e.points.forEach(function(e){var t=(0,d.createMarker)(e);(0,d.createInfoBox)(t,e)}),u["default"].currentStrategy=e.strategy||f.global,u["default"].currentPositioning=e.positioning||"percent",u["default"].currentUser=e.user,document.addEventListener("click",i)},close:function(){document.removeEventListener("click",i)},addEventListener:c.addEventListener,strategies:f}},function(e,t){function n(e,t){if("BODY"===e.tagName)return"body"+(t?" > "+t:"");if(e.id)return"#"+e.id+(t?" > "+t:"");var r=Array.prototype.slice.call(e.parentElement.children).indexOf(e),a=e.tagName.toLowerCase()+":nth-child("+(r+1)+")"+(t?" > "+t:"");return n(e.parentElement,a)}function r(e,t){var n=a(e),r=a(t);return[n[0]-r[0],n[1]-r[1]]}function a(e){return[e.offsetLeft,e.offsetTop]}function i(e,t){return t(e)?e:"HTML"===e.tagName?null:i(e.parentElement,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelector=n,t.getRelativeOffset=r,t.getGlobalOffset=a,t.resolveContainer=i},function(e,t){function n(e,t){a[e]&&a[e].forEach(function(e){return e(t)})}function r(e,t){a[e]||(a[e]=[]),a[e].push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.emit=n,t.addEventListener=r;var a={};t.__listeners=a},function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function a(){return x}function i(e){x=e}function o(e){var t=e.position,n=document.querySelector(t.container),r=(0,v.getGlobalOffset)(n),a=document.createElement("div"),i=void 0,o=void 0;if(a.classList.add("feedback-spot"),"pixel"===t.positioning)i=r[0]+t.offset[0],o=r[1]+t.offset[1];else if("percent"===t.positioning){var c=t.offset[0]/t.containerSize.width,d=t.offset[1]/t.containerSize.height,l=n.getBoundingClientRect();i=r[0]+l.width*c,o=r[1]+l.height*d}return a.style.top=o+"px",a.style.left=i+"px",document.body.appendChild(a),a}function c(e,t){e.addEventListener("click",function(n){n.stopPropagation(),t&&(e.classList.toggle("active"),x!==e?(d(),x=e):x=null)});var n=document.createElement("div");n.classList.add("feedback-box"),t&&n.classList.add("toggled"),n.addEventListener("click",function(e){e.stopPropagation()}),e.appendChild(n);var r=document.createElement("div");return r.classList.add("feedback-container"),n.appendChild(r),{box:n,container:r}}function d(){x&&(x.classList.remove("active"),x=null)}function l(e,t){var n=document.createElement("div");n.classList.add("feedback-text"),n.textContent=t.text,e.appendChild(n);var r=document.createElement("div");r.classList.add("feedback-info");var a=new Date(t.datetime);if(r.textContent="By "+(t.user||"unknown user")+" at "+a.toLocaleString(),n.appendChild(r),t.user===h["default"].currentUser){var i=document.createElement("a");i.classList.add("delete-button"),i.innerText="X",i.setAttribute("role","button"),i.setAttribute("href","#"),r.appendChild(i);var o=document.createElement("a");o.classList.add("edit-button"),o.innerText="Edit",o.setAttribute("role","button"),o.setAttribute("href","#"),r.appendChild(o),i.addEventListener("click",function(t){t.preventDefault(),e.removeChild(n),(0,p.emit)("deleteComment")}),o.addEventListener("click",function(r){r.preventDefault();var a=s(null,null,"comment-textfield");a.textarea.value=t.text,a.cancel.addEventListener("click",function(){console.log("edit comment text field cancel clicked"),e.replaceChild(n,a.container)}),a.save.addEventListener("click",function(){console.log("edit comment text field save clicked"),console.log(n.textContent,"|||",a.textarea.value),t.text===editReplyTextField.textarea.value&&e.replaceChild(n,a.container)}),e.replaceChild(a.container,n),(0,p.emit)("editComment")})}var c=document.createElement("a");c.classList.add("reply-button"),c.innerText="Reply",c.setAttribute("role","button"),c.setAttribute("href","#"),n.appendChild(c);var l=document.createElement("div");return l.classList.add("replies-container"),n.appendChild(l),t.replies&&t.replies.forEach(function(e){u(l,e)}),c.addEventListener("click",function(e){e.preventDefault();var n=void 0;!l||l.lastElementChild&&l.lastElementChild.classList.contains("reply-textfield")||(n=s(l,"Reply:","reply-textfield"),n.cancel.addEventListener("click",function(){var e=g(n.textarea.value);n.textarea.value="",(0,p.emit)("cancelReply",e),d()}),n.save.addEventListener("click",function(){var e=g(n.textarea.value);n.textarea.value="",t.replies.push(e),(0,p.emit)("saveReply",t),l.removeChild(n.container),u(l,e)}))}),n}function u(e,t){var n=document.createElement("div");n.classList.add("reply-container"),e.appendChild(n);var r=document.createElement("div");r.classList.add("feedback-reply"),r.textContent=t.text,n.appendChild(r);var a=document.createElement("div");a.classList.add("feedback-info");var i=new Date(t.datetime);if(a.textContent="By "+(t.user||"unknown user")+" at "+i.toLocaleString(),t.user===h["default"].currentUser){var o=document.createElement("a");o.classList.add("delete-button"),o.innerText="X",o.setAttribute("role","button"),o.setAttribute("href","#"),a.appendChild(o);var c=document.createElement("a");c.classList.add("edit-button"),c.innerText="Edit",c.setAttribute("role","button"),c.setAttribute("href","#"),a.appendChild(c),o.addEventListener("click",function(t){t.preventDefault(),e.removeChild(n),(0,p.emit)("deleteReply")}),c.addEventListener("click",function(e){e.preventDefault(),(0,p.emit)("editReply")})}return n.appendChild(a),n}function s(e,t,n){var r=document.createElement("div");if(n&&r.classList.add(n),e&&e.appendChild(r),t){var a=document.createElement("label");a.textContent=t,r.appendChild(a)}var i=document.createElement("textarea");r.appendChild(i);var o=document.createElement("div");o.classList.add("button-holder"),r.appendChild(o);var c=document.createElement("button");c.classList.add("cancel-button"),c.innerText="Cancel",o.appendChild(c);var d=document.createElement("button");return d.classList.add("save-button"),d.innerText="Save",o.appendChild(d),{cancel:c,save:d,textarea:i,container:r}}function f(e,t){function n(e,t){e.forEach(function(t,n){t.includes("owner-")&&e.remove(t)}),e.add(t)}function r(e,t){e.forEach(function(t,n){t.includes("status-")&&e.remove(t)}),e.add(t)}var a=c(e,!0),i={PM:"pm",Client:"client",ID:"id",IxD:"ixd",Video:"video"},o={Open:"open",Closed:"closed","No Action":"no-action"},u=document.createElement("select");a.container.appendChild(u);for(var f=Object.keys(i),v=0;v<f.length;v++){var m=document.createElement("option");m.value=f[v],m.text=f[v],u.appendChild(m)}u.addEventListener("change",function(t){var r=t.target.value;n(e.classList,"owner-"+i[r]),(0,p.emit)("changeOwner",r)});var h=document.createElement("select");a.container.appendChild(h);for(var x=Object.keys(o),g=0;g<x.length;g++){var C=document.createElement("option");C.value=x[g],C.text=x[g],h.appendChild(C)}h.addEventListener("change",function(t){var n=t.target.value;r(e.classList,"status-"+o[n]),(0,p.emit)("changeStatus",n)}),t.comments.forEach(function(e){l(a.container,e)});var E=s(a.container,"Comment:","comment-textfield");return E.cancel.addEventListener("click",function(){var e=b(E.textarea.value);E.textarea.value="",(0,p.emit)("cancelComment",e),d()}),E.save.addEventListener("click",function(){var e=b(E.textarea.value);E.textarea.value="",t.comments.push(e),(0,p.emit)("saveComment",t),a.container.removeChild(E.container),l(a.container,e),a.container.appendChild(E.container)}),Object.assign({},E,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.__getOpenSpot=a,t.__setOpenSpot=i,t.createMarker=o,t.addBox=c,t.closeInfoBox=d,t.addText=l,t.addReply=u,t.addTextField=s,t.createInfoBox=f;var v=n(2),p=n(3),m=n(5),h=r(m),x=void 0,g=function(e){return{datetime:(new Date).toISOString(),user:h["default"].currentUser,text:e}},b=function(e){return{datetime:(new Date).toISOString(),user:h["default"].currentUser,text:e,replies:[]}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={currentStrategy:void 0,currentUser:void 0,currentPositioning:void 0,additionalData:void 0,feedbackBoxOpen:!1}},function(e,t,r){var a;"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":"undefined"==typeof e?"undefined":n(e)};!function(n){function i(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function o(e,t){return e<<t|e>>>32-t}function c(e,t,n,r,a,c){return i(o(i(i(t,e),i(r,c)),a),n)}function d(e,t,n,r,a,i,o){return c(t&n|~t&r,e,t,a,i,o)}function l(e,t,n,r,a,i,o){return c(t&r|n&~r,e,t,a,i,o)}function u(e,t,n,r,a,i,o){return c(t^n^r,e,t,a,i,o)}function s(e,t,n,r,a,i,o){return c(n^(t|~r),e,t,a,i,o)}function f(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n,r,a,o,c,f=1732584193,v=-271733879,p=-1732584194,m=271733878;for(n=0;n<e.length;n+=16)r=f,a=v,o=p,c=m,f=d(f,v,p,m,e[n],7,-680876936),m=d(m,f,v,p,e[n+1],12,-389564586),p=d(p,m,f,v,e[n+2],17,606105819),v=d(v,p,m,f,e[n+3],22,-1044525330),f=d(f,v,p,m,e[n+4],7,-176418897),m=d(m,f,v,p,e[n+5],12,1200080426),p=d(p,m,f,v,e[n+6],17,-1473231341),v=d(v,p,m,f,e[n+7],22,-45705983),f=d(f,v,p,m,e[n+8],7,1770035416),m=d(m,f,v,p,e[n+9],12,-1958414417),p=d(p,m,f,v,e[n+10],17,-42063),v=d(v,p,m,f,e[n+11],22,-1990404162),f=d(f,v,p,m,e[n+12],7,1804603682),m=d(m,f,v,p,e[n+13],12,-40341101),p=d(p,m,f,v,e[n+14],17,-1502002290),v=d(v,p,m,f,e[n+15],22,1236535329),f=l(f,v,p,m,e[n+1],5,-165796510),m=l(m,f,v,p,e[n+6],9,-1069501632),p=l(p,m,f,v,e[n+11],14,643717713),v=l(v,p,m,f,e[n],20,-373897302),f=l(f,v,p,m,e[n+5],5,-701558691),m=l(m,f,v,p,e[n+10],9,38016083),p=l(p,m,f,v,e[n+15],14,-660478335),v=l(v,p,m,f,e[n+4],20,-405537848),f=l(f,v,p,m,e[n+9],5,568446438),m=l(m,f,v,p,e[n+14],9,-1019803690),p=l(p,m,f,v,e[n+3],14,-187363961),v=l(v,p,m,f,e[n+8],20,1163531501),f=l(f,v,p,m,e[n+13],5,-1444681467),m=l(m,f,v,p,e[n+2],9,-51403784),p=l(p,m,f,v,e[n+7],14,1735328473),v=l(v,p,m,f,e[n+12],20,-1926607734),f=u(f,v,p,m,e[n+5],4,-378558),m=u(m,f,v,p,e[n+8],11,-2022574463),p=u(p,m,f,v,e[n+11],16,1839030562),v=u(v,p,m,f,e[n+14],23,-35309556),f=u(f,v,p,m,e[n+1],4,-1530992060),m=u(m,f,v,p,e[n+4],11,1272893353),p=u(p,m,f,v,e[n+7],16,-155497632),v=u(v,p,m,f,e[n+10],23,-1094730640),f=u(f,v,p,m,e[n+13],4,681279174),m=u(m,f,v,p,e[n],11,-358537222),p=u(p,m,f,v,e[n+3],16,-722521979),v=u(v,p,m,f,e[n+6],23,76029189),f=u(f,v,p,m,e[n+9],4,-640364487),m=u(m,f,v,p,e[n+12],11,-421815835),p=u(p,m,f,v,e[n+15],16,530742520),v=u(v,p,m,f,e[n+2],23,-995338651),f=s(f,v,p,m,e[n],6,-198630844),m=s(m,f,v,p,e[n+7],10,1126891415),p=s(p,m,f,v,e[n+14],15,-1416354905),v=s(v,p,m,f,e[n+5],21,-57434055),f=s(f,v,p,m,e[n+12],6,1700485571),m=s(m,f,v,p,e[n+3],10,-1894986606),p=s(p,m,f,v,e[n+10],15,-1051523),v=s(v,p,m,f,e[n+1],21,-2054922799),f=s(f,v,p,m,e[n+8],6,1873313359),m=s(m,f,v,p,e[n+15],10,-30611744),p=s(p,m,f,v,e[n+6],15,-1560198380),v=s(v,p,m,f,e[n+13],21,1309151649),f=s(f,v,p,m,e[n+4],6,-145523070),m=s(m,f,v,p,e[n+11],10,-1120210379),p=s(p,m,f,v,e[n+2],15,718787259),v=s(v,p,m,f,e[n+9],21,-343485551),f=i(f,r),v=i(v,a),p=i(p,o),m=i(m,c);return[f,v,p,m]}function v(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function p(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function m(e){return v(f(p(e),8*e.length))}function h(e,t){var n,r,a=p(e),i=[],o=[];for(i[15]=o[15]=void 0,a.length>16&&(a=f(a,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^a[n],o[n]=1549556828^a[n];return r=f(i.concat(p(t)),512+8*t.length),v(f(o.concat(r),640))}function x(e){var t,n,r="0123456789abcdef",a="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),a+=r.charAt(t>>>4&15)+r.charAt(15&t);return a}function g(e){return unescape(encodeURIComponent(e))}function b(e){return m(g(e))}function C(e){return x(b(e))}function E(e,t){return h(g(e),g(t))}function y(e,t){return x(E(e,t))}function L(e,t,n){return t?n?E(t,e):y(t,e):n?b(e):C(e)}a=function(){return L}.call(t,r,t,e),!(void 0!==a&&(e.exports=a))}(void 0)}])}]);